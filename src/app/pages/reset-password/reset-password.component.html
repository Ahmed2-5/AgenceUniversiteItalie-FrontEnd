<div class="header bg-gradient-danger py-3 py-lg-5">
    <div class="container">
      <div class="header-body text-center mb-7">
        <div class="row justify-content-center">
          <div class="col-lg-5 col-md-6">
            <h1 class="text-white">RESET PASSWORD</h1>
          </div>
        </div>
      </div>
    </div>
    <div class="separator separator-bottom separator-skew zindex-100">
      <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <polygon class="fill-default" points="2560 0 2560 100 0 100"></polygon>
      </svg>
    </div>
</div>

<!-- Page content -->
<div class="container mt--8 pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-5 col-md-7">
            <div class="card bg-secondary shadow border-0">
                <div class="card-body px-lg-5 py-lg-5">
                    <form [formGroup]="forminput" (ngSubmit)="reset()">
                      
                        <!-- New Password Field -->
                        <div class="form-group mb-3">
                            <div class="input-group input-group-alternative">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input class="form-control" 
                                       [attr.type]="passwordVisible ? 'text' : 'password'" 
                                       id="inputPassword4"
                                       formControlName="password" 
                                       placeholder="New password" 
                                       (focus)="showPasswordRequirements = true"
                                       (blur)="showPasswordRequirements = false">
                                <div class="input-group-append">
                                    <button type="button" class="btn btn-light" (click)="togglePasswordVisibility('password')">
                                        <i class="far" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Password Requirements -->
                        <div *ngIf="showPasswordRequirements" class="password-requirements">
                            Password must contain at least:
                            <ul>
                                <li>one uppercase letter</li>
                                <li>one lowercase letter</li>
                                <li>one digit</li>
                                <li>one special character</li>
                                <li>at least 12 characters</li>
                            </ul>
                        </div>

                        <!-- New Password Validation -->
                        <div *ngIf="submitted && forminput.controls['password'].hasError('required')"
                             class="alert alert-danger" role="alert">
                            Please complete this required field.
                        </div>
                        <div *ngIf="submitted && forminput.controls['password'].hasError('pattern')"
                             class="alert alert-danger" role="alert">
                            The password does not meet security requirements.
                        </div>

                        <!-- Confirm Password Field -->
                        <div class="form-group">
                            <div class="input-group input-group-alternative">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input class="form-control" 
                                       [attr.type]="confirmPasswordVisible ? 'text' : 'password'" 
                                       id="inputConfirmPassword"
                                       formControlName="confirmPassword" 
                                       placeholder="Confirm new password">
                                <div class="input-group-append">
                                    <button type="button" class="btn btn-light" (click)="togglePasswordVisibility('confirmPassword')">
                                        <i class="far" [ngClass]="confirmPasswordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Confirm Password Validation -->
                        <div *ngIf="submitted && forminput.controls['confirmPassword'].hasError('required')"
                             class="alert alert-danger" role="alert">
                            Please complete this required field.
                        </div>

                        <!-- Password Mismatch Error -->
                        <div *ngIf="submitted && forminput.errors?.passwordMismatch" class="alert alert-danger" role="alert">
                            Passwords do not match.
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button class="btn btn-primary my-4" type="submit">Save</button>
                        </div>

                    </form>
                </div>
            </div>

            <!-- Footer Links -->
            <div class="row mt-3">
                <div class="col-6">
                    <a href="/#/login" class="text-light"><small>Sign In?</small></a>
                </div>
            </div>

        </div>
    </div>
</div>
